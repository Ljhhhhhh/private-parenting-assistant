# AI 育儿助手开发文档

## 1. 技术选型

- 前端框架：React 18 + TypeScript
- 构建工具：Vite
- 状态管理：React Context + 自定义 Hook
- UI 库：Ant Design Mobile（主题定制）+ Tailwind CSS（原子化样式）
- 网络请求：Axios 封装
- 路由：react-router-dom
- 代码规范：ESLint + Prettier
- 版本管理：Git

## 2. 目录结构说明

详见 .cursor/rules/project-structure.mdc 及各子规则，核心目录如下：

- src/components：复用型 UI 组件
- src/api：所有后端接口封装
- src/contexts：全局状态管理
- src/types：类型定义
- src/utils：工具函数与请求封装
- src/assets：静态资源
- public：公开资源

## 3. 核心数据结构（简要）

详见 src/types/models.ts，主要包括：

- 用户/认证：RegisterDto, LoginDto, TokenDto
- 儿童信息：CreateChildDto, ChildResponseDto
- 日常记录：CreateRecordDto, RecordResponseDto, RecordType（Sleep/Feeding/Diaper/Note）
- 聊天/AI：ChatRequestDto, ChatResponseDto, ChatFeedbackDto

## 4. 主要页面与组件

### 4.1 登录/注册

- 手机号、验证码、密码输入，协议勾选，错误提示
- 组件：Input、Button、协议弹窗

### 4.2 儿童信息

- 添加/编辑/展示儿童信息，首次引导
- 组件：表单、日期选择、性别选择、信息卡片

### 4.3 日常记录

- 快速添加（FAB/快捷按钮）、记录表单（睡眠/喂养/排便）、记录列表/时间轴
- 组件：浮动按钮、表单、卡片、时间选择、数量/质量输入

### 4.4 AI 助手

- 聊天对话区、输入框、AI 回复、示例问题、反馈按钮、免责声明
- 组件：聊天气泡、输入框、加载动画、反馈按钮

### 4.5 个人中心

- 儿童信息展示、设置、协议、退出登录
- 组件：信息卡片、列表项、按钮

### 4.6 公共组件

- 顶部导航栏、底部 TabBar、全局加载/空状态/错误提示、Toast

## 5. 接口约定（简要）

详见 src/api 及 types/models.ts，所有接口均返回标准结构，常用接口如：

- POST /auth/register 注册
- POST /auth/login 登录
- GET /children 获取儿童列表
- POST /records 创建记录
- GET /records/child/:id 获取某儿童记录
- POST /chat AI 对话

> 具体参数与返回值类型详见 models.ts，所有请求均自动携带 token。

## 6. 开发规范

- 组件/页面命名统一，目录结构清晰，文件小写+中划线/驼峰
- 类型优先引用 models.ts，接口统一走 src/api
- 样式优先用 Tailwind，复杂场景可用 Antd Mobile 并定制主题
- 状态管理优先用 Context+Hook，避免全局变量
- 交互、视觉、文案严格遵循设计规范（见 design.mdc）
- 重要操作、异步流程有加载/错误/空状态反馈
- 代码提交前自查 ESLint/Prettier，保持风格统一

## 7. 测试与验收

- 单元测试：关键工具函数、核心组件（可选）
- 功能自测：每个页面/流程自测主流机型
- 验收标准：见开发计划，需通过产品/设计/测试多轮验收
- Bug 修复：优先级高的缺陷需及时修复，影响主流程的 bug 禁止上线

## 8. 常见问题与建议

- **接口报错/无响应**：检查 token、网络、接口路径，必要时联系后端/AI 同学
- **样式不一致**：优先查 tailwind.config.js 和设计规范，必要时二次封装组件
- **状态丢失/异常**：检查 Context Provider 包裹、Hook 用法
- **AI 回答风险**：所有 AI 建议需有免责声明，医疗相关内容需显著提示
- **可访问性**：所有交互元素需有焦点、辅助文本，色彩对比达标

## 9. 参考文档

- 设计方案详见 doc/设计方案.md
- 设计规范详见 .cursor/rules/design.mdc
- 组件/接口/类型详见 src 目录及 .cursor/rules

---

如有疑问，优先查阅本开发文档及相关规则，仍有疑问请及时沟通。
